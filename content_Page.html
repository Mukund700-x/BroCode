<!DOCTYPE html>
<html lang="en">
<head>
    <title>Review_Page</title>
    <style>
        body {
background: linear-gradient(135deg, #6db0d1 0%, #414345 100%);      color: #fff;
      margin: 0;
      padding: 0;
    }
        .main-navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #8d8dec;
      padding: 14px 32px;
      border-bottom: 2px solid #222;
      position: sticky;
      top: 0;
      
    }
    .main-navbar .logo {
      font-size: 1.8rem;
      font-weight: bold;
      letter-spacing: 2px;
      color: #fff;
    }
    .main-navbar .dashboard-btn,
    .main-navbar .admin-btn {
      background: #442f37;
      color: #fff;
      border: 2px solid #fff;
      border-radius: 22px;
      padding: 7px 22px;
      font-size: 1.1rem;
      margin-left: 15px;
      cursor: pointer;
    }
    .main-navbar .notif {
      background: #c0f3f0;
      padding: 6px 13px;
      border-radius: 50px;
      margin-right: 18px;
      font-size: 19px;
      border: none;
    }

    .filter-panel{
        display: flex;
        align-items: center;
        padding: 20px 38px 0 38px;
        gap: 15px;
    }
    .filter-panel select, .filter-panel input[type=checkbox]{
        font-size: 17px;
        border-radius: 10px;
        padding: 2px 10px;
        background-color: #8d8dec;
        color: #fff;
        margin-right: 8px;
    }
    .filter-panel label{
        font-size: 18px;
        color: aliceblue;
        margin-right: 6px;
    }
    .filter-panel .sort-group{
        background-color: #8d8dec;
        border-radius: 10px;
        padding: 5px 17px;
        border: 1px solid;
        display: flex;
        align-items: center;
    }
    .filter-panel .sort-radios{
        margin-left: 10px;
    }

    .search-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 30px 0 0 0;
    }
    .search-bar input[type="text"]{
        width: 340px;
        height:30px;
        border-radius: 15px;
        font-size: 20px;
        padding: 5px 16px;
        outline: none;
        margin-right: 12px;
    }
    .search-bar button, .search-bar .ask-btn{
        background-color: #442f37;
        color: #fff;
        border-radius: 10px;
        font-size: 20px;
        padding: 5px 25px;
        margin-left: 7px;
        cursor: pointer;
    }
    .search-bar .ask-btn:hover{
        background-color: #7878ec;
        color: #222;
    }
    
    .forum-listing {
      margin: 42px auto 0 auto;
      max-width: 900px;
      min-height: 340px;
    }
    .question-card {
      background: #eeeef1;
      margin-bottom: 18px;
      border-radius: 17px;
      box-shadow: 0 1px 10px rgba(146, 143, 143, 0.733);
      padding: 1.5em;
      display: flex;
      align-items: flex-start;
      border: 2px solid #5b5b5c;
      position: relative;
    }
    .question-card .votes {
      min-width: 55px;
      text-align: center;
      font-size: 18px;
      margin-right: 23px;
      background: #666668;
      border-radius: 6px;
      padding: 6px;
      color: #d6d6db;
      border: 2px solid #888585;
    }
    .question-card .q-tags {
      margin-bottom: 7px;
    }
    .question-card .q-tag {
      display: inline-block;
      font-size: 0.95em;
      background: #01325f;
      color: #00a2ff;
      border-radius: 13px;
      padding: 2px 13px;
      margin-right: 7px;
      margin-bottom: 3px;
      border: 1px solid #006eff;
      font-family: inherit;
    }
    .question-card .q-title {
      font-size: 1.32em;
      font-weight: bold;
      margin-bottom: 8px;
      color: #111111;
    }
    .question-card .q-status {
      position: absolute;
      top: 19px;
      right: 24px;
      background: orange;
      color: #161616;
      padding: 2px 18px;
      border-radius: 17px;
      font-size: 1.1em;
      border: 2px solid #f4cc6a;
      font-weight: bold;
    }
    .question-card .q-meta {
      color: #8abbe9;
      font-size: 1.08em;
      margin-top: 3px;
    }

    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 36px 0 38px 0;
      font-size: 22px;
    }
    .pagination span, .pagination a {
      color: #fff;
      padding: 6px 13px;
      background: transparent;
      border-radius: 10px;
      margin: 0 4px;
      cursor: pointer;
      text-decoration: none;
      border: 2px solid #006eff;
      transition: background 0.24s;
      font-weight: bold;
    }
    .pagination .active, .pagination span.current {
      background: #00ff66;
      color: #151515;
      pointer-events: none;
    }

    .remove-all-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #d9534f;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .remove-all-btn:hover {
      background-color: #c9302c;
    }

    </style>
</head>
<body>
    <div class="main-navbar">
        <div>
        <button class="notif">Notify</button>
        <button class="dashboard-btn">DashBoard</button>
        <button class="admin-btn">Admin</button>
        </div>
    </div>

    <form class="filter-panel">
        <label><input type="checkbox">Show open only</label>
        <select>
            <option>categories</option>
            <option>Mechanical</option>
            <option>General</option>
            <option>Robotics</option>
        </select>
        <select>
            <option>Status</option>
            <option>Open</option>
            <option>Closed</option>
        </select>
        <div class="sort-group">
            <label>sort by:</label>
            <label>
                <input class="sort-radios" type="radio" name="sort" checked> Most Comment
            </label>
            <label>
                <input class="sort-radios" name="sort" type="radio">
                Most vote
            </label>
        </div>
    </form>

    <div class="search-bar">
        <input type="text" placeholder="search">
        <button>Search</button>
        <button class="ask-btn">Ask</button>
    </div>

    <div class="forum-listing">

        <div class="question-card">
        <div class="votes">1</div>
        <div>
            <div class="q-tags">
            <span class="q-tag">Mechanical</span>
            <span class="q-tag" style="background:#1d589c;color:#fff;">Robotics</span>
            </div>
            <div class="q-title">thi si good. i learned.</div>
            <div class="q-meta">Posted by prakhar</div>
        </div>
        <div class="q-status">Open</div>
        </div>

        <div class="question-card">
        <div class="votes">2</div>
        <div>
            <div class="q-tags">
            <span class="q-tag">Technical</span>
            <span class="q-tag" style="background:#1d589c;color:#fff;">AI</span>
            </div>
            <div class="q-title">this is the first ppost</div>
            <div class="q-meta">Posted by nikhil</div>
        </div>
        <div class="q-status">Open</div>
        </div>

        <div class="question-card">
        <div class="votes">3</div>
        <div>
            <div class="q-tags">
            <span class="q-tag">Mechnical</span>
            <span class="q-tag" style="background:#1d589c;color:#fff;">AI</span>
            </div>
            <div class="q-title">AI is more usable .</div>
            <div class="q-meta">Posted by Narander</div>
        </div>
        <div class="q-status">Open</div>
        </div>
    </div>

    <div class="pagination">
        <span class="current">1</span>
        <a href="#">2</a>
        <a href="#">3</a>
        <span>4</span>
        <span>â€¦</span>
        <a href="#">11</a>
    </div>

    <button class="remove-all-btn">Remove All Questions</button>
<script>
function getQuestions() {
  return JSON.parse(localStorage.getItem('questions')) || [];
}
function setQuestions(questions) {
  localStorage.setItem('questions', JSON.stringify(questions));
}

function renderQuestions() {
  const forum = document.querySelector('.forum-listing');
  forum.innerHTML = '';
  let questions = getQuestions();

  const statusSelect = document.querySelector('.filter-panel select:nth-of-type(2)');
  const statusValue = statusSelect.value;

  const categorySelect = document.querySelector('.filter-panel select:nth-of-type(1)');
  const categoryValue = categorySelect.value;

  const openOnly = document.querySelector('.filter-panel input[type="checkbox"]').checked;
  const searchText = document.querySelector('.search-bar input[type="text"]').value.trim().toLowerCase();
  
  let sortBy = 'comments';
  document.querySelectorAll('.sort-radios').forEach(radio => {
    if (radio.checked && radio.parentElement.textContent.includes('vote')) sortBy = 'votes';
  });

  questions = questions.filter(q => {
    if (statusValue !== 'Status' && q.status !== statusValue) return false;
    if (categoryValue !== 'categories' && !q.tags.toLowerCase().includes(categoryValue.toLowerCase())) return false;
    if (openOnly && q.status !== 'Open') return false;

    if (searchText) {
      const haystack = (q.question + ' ' + q.description + ' ' + q.tags + ' ' + q.user).toLowerCase();
      if (!haystack.includes(searchText)) return false;
    }
    return true;
  });


  if (sortBy === 'votes') {
    questions.sort((a, b) => b.votes - a.votes);
  }


  questions.forEach((q, idx) => {
    const card = document.createElement('div');
    card.className = 'question-card';
    card.innerHTML = `
      <div class="votes" style="cursor:pointer;" data-idx="${idx}">${q.votes}</div>
      <div>
        <div class="q-tags">
          ${q.tags.split(',').map(tag => `<span class="q-tag">${tag.trim()}</span>`).join('')}
        </div>
        <div class="q-title">${q.question}</div>
        <div class="q-meta">Posted by ${q.user}</div>
        <div style="margin-top:8px;color:#222;">${q.description}</div>
      </div>
      <div class="q-status">${q.status}</div>
    `;
    forum.appendChild(card);
  });


  forum.querySelectorAll('.votes').forEach(voteEl => {
    voteEl.onclick = function() {
      const idx = parseInt(this.getAttribute('data-idx'));
      const filteredQuestions = questions;
      const q = filteredQuestions[idx];
      let allQuestions = getQuestions();

      const origIdx = allQuestions.findIndex(qq =>
        (qq.id && q.id && qq.id === q.id) ||
        (qq.question === q.question && qq.description === q.description)
      );


      let voted = JSON.parse(localStorage.getItem('votedQuestions') || '[]');

      const voteKey = q.id ? q.id : (q.question + '|' + q.description);
      if (voted.includes(voteKey)) {
        alert('You have already voted for this question.');
        return;
      }

      allQuestions[origIdx].votes += 1;
      setQuestions(allQuestions);


      voted.push(voteKey);
      localStorage.setItem('votedQuestions', JSON.stringify(voted));

      renderQuestions();
    };
  });
}


document.querySelectorAll('.filter-panel select, .filter-panel input[type="checkbox"], .sort-radios').forEach(el => {
  el.addEventListener('change', renderQuestions);
});
document.querySelector('.search-bar input[type="text"]').addEventListener('input', renderQuestions);
document.querySelector('.search-bar button').addEventListener('click', function(e) {
  e.preventDefault();
  renderQuestions();
});


window.addEventListener('DOMContentLoaded', renderQuestions);


document.querySelector('.dashboard-btn').onclick = function() {
  window.location.href = 'profile.html';
};
document.querySelector('.admin-btn').onclick = function() {
  alert('Admin section coming soon!');
};
document.querySelector('.notif').onclick = function() {
  alert('No new notifications.');
};
document.querySelector('.ask-btn').onclick = function() {
  window.location.href = 'ask.html';
};

document.querySelector('.remove-all-btn').onclick = function() {
    if (confirm('Are you sure you want to remove all questions? This action cannot be undone.')) {
        localStorage.removeItem('questions');
        localStorage.removeItem('votedQuestions');
        renderQuestions();
    }
};

</script>        
</body>
</html>
